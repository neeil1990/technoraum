<?$MESS ['IPOLMO_FAQ'] = "FAQ";$MESS ['IPOLMO_FAQ_TITLE'] = "Помощь в настройке модуля";$MESS ['IPOLMO_ADDSETUPS'] = "Дополнительные настройки";$MESS ['IPOLMO_ADDSETUPS_TITLE'] = "Настройки дополнительного функционала.";// Опции$MESS ['IPOLMO_OPT_WORKMODE'] = "Режим работы";$MESS ['IPOLMO_OPT_WORKMODE_1'] = "Многомакросовый";$MESS ['IPOLMO_OPT_WORKMODE_2'] = "Одномакросовый";$MESS ['IPOLMO_OPT_TEXTMODE'] = "Тип сообщения";$MESS ['IPOLMO_OPT_TEXTMODE_1'] = "Текст";$MESS ['IPOLMO_OPT_PROPS'] = "Обрабатываемые свойства заказа";$MESS ['IPOLMO_OPT_PROPS_TABLE_NAME']  = "Название свойства";$MESS ['IPOLMO_OPT_PROPS_TABLE_CODE']  = "Код свойства";$MESS ['IPOLMO_OPT_PROPS_COMMON']      = "Общие свойства";$MESS ['IPOLMO_OPT_PROPS_IMOPRICE']    = "Сумма заказа";$MESS ['IPOLMO_OPT_PROPS_DELIVERY']    = "Доставка";$MESS ['IPOLMO_OPT_PROPS_DELIVERYPRC'] = "Стоимость доставки";$MESS ['IPOLMO_OPT_PROPS_TRACKING']    = "Идентификатор отправления";$MESS ['IPOLMO_OPT_PROPS_PAYSYSTEM']   = "Оплата";$MESS ['IPOLMO_OPT_PROPS_IMOPAYED']    = "Документ об оплате";$MESS ['IPOLMO_OPT_PROPS_IMOCOMMENT']  = "Комментарий покупателя";$MESS ['IPOLMO_OPT_PROPS_IMOSHIPMENT'] = "Номер отгрузки";$MESS ['IPOLMO_OPT_EVENTS'] = "События, с которыми работает модуль";$MESS ['IPOLMO_OPT_EVENTS_SALE_NEW_ORDER'] = "Новый заказ";$MESS ['IPOLMO_OPT_EVENTS_SALE_NEW_ORDER_RECURRING'] = "Новый заказ на продление подписки";$MESS ['IPOLMO_OPT_EVENTS_SALE_ORDER_CANCEL'] = "Отмена заказа";$MESS ['IPOLMO_OPT_EVENTS_SALE_ORDER_DELIVERY'] = "Доставка заказа разрешена";$MESS ['IPOLMO_OPT_EVENTS_SALE_ORDER_PAID'] = "Заказ оплачен";$MESS ['IPOLMO_OPT_EVENTS_SALE_ORDER_REMIND_PAYMENT'] = "Напоминание об оплате заказа";$MESS ['IPOLMO_OPT_EVENTS_SALE_RECURRING_CANCEL'] = "Подписка отменена";$MESS ['IPOLMO_OPT_EVENTS_SALE_STATUS_CHANGED'] = "Изменение статуса заказа";$MESS ['IPOLMO_OPT_EVENTS_SALE_SUBSCRIBE_PRODUCT'] = "Уведомление о поступлении товара";$MESS ['IPOLMO_OPT_EVENTS_TEMPLATE'] = "шаблон";$MESS ['IPOLMO_OPT_ADDEVENTS'] = "Дополнительные события";$MESS ['IPOLMO_OPT_LOCATIONDETAILS'] = "Выводимая цепочка местоположений";$MESS ['IPOLMO_OPT_LOCATIONSEPARATOR'] = "Разделитель цепочки";// FAQ$MESS ['IPOLMO_FAQ_WAT_TITLE'] = "Что делает модуль?";$MESS ['IPOLMO_FAQ_WAT_DESCR'] = "<p>Модуль позволяет добавить в шаблон письма, отправляемого клиенту при оформлении заказа, свойства заказа, ранее недоступные, такие как, например, контактное лицо, платежная система, тип оплаты, итд.</p><p>При необходимости можно настроить работу модуля с другими письмами, связанными с заказом, например, с разрешением доставки или изменением статуса заказа.</p><p>Cвойства-файлы модуль прикрепляет к письму ссылкой на сайт: делать их вложениями невозможно без вмешательства в логику работы почтового сервиса Битрикса.</p>";$MESS ['IPOLMO_FAQ_WORK_TITLE'] = "Как работать с модулем?";$MESS ['IPOLMO_FAQ_WORK_DESCR'] = "<p>На вкладке \"Настройки\" необходимо выбрать свойства, которые нужно добавить в письмо просто кликнув на них (свойства подсветятся зеленым). Далее необходимо нажать клавишу <strong>Сохранить</strong>, чтобы модуль запомнил выбранные свойства, они останутся зелеными. После этого - добавить макросы свойств в шаблон письма по аналогии со стандартными.</p><p>Шаблон письма, отсылаемого при оформлении заказа можно найти <a href='/bitrix/admin/type_edit.php?EVENT_NAME=SALE_NEW_ORDER' target='_blank'>здесь</a>. В открывшемся окне перейдите в закладку \"Шаблоны\", выберите используемый шаблон и вставьте макросы в нужное место.</p><img src='/bitrix/images/ipol.mailorder/FAQ1.png'><p>После того, как макросы будут добавлены - проверьте, чтобы в шаблоне настройка \"Тип сообщения\" соответствовала одноименной настройке модуля. Актуально для одномакросового режима работы</p><img src='/bitrix/images/ipol.mailorder/FAQ4.png'><p>По умолчанию информация добавляется в письма, отсылаемые при оформлении заказа, но с помощью настройки \"События, с которыми работает модуль\" можно подключать и другие события. Главное - не забыть вставить макросы в соответствующий шаблон (у каждого события свой шаблон, ровно как и у каждого статуса заказа свой шаблон). Если событие убирается с обработки - не забудьте удалить макросы в его шаблонах: они не будут обработаны и останутся как есть.</p><p><strong>Подробнее о макросах</strong></p><p>Модуль позволяет использовать два режима работы: многомакросовый и одномакросовый (см. вкладку настройки).</p><p>В <i>многомакросовом режиме</i> необходимо вставлять в шаблон макрос каждого свойства (макрос свойства для удобства стоит в таблице рядом с кодом в скобках) там, где он должен быть. Вместо макроса в письмо будет вставлено <i>значение</i> этого свойства. Плюс этого метода в том, что письмо можно оформить как посчитается нужным, минус - громоздкость шаблона.</p><img src='/bitrix/images/ipol.mailorder/FAQ5.png'><br><img src='/bitrix/images/ipol.mailorder/FAQ2.png'><p>В <i>одномакросовом режиме</i> необходимо вставит в шаблон один-единственный макрос #IPOLMOALL_PROPS#, который заменится на блок вида Название свойства - значение свойства. Сортировка будет такая же, как и в таблице выбора свойств. Плюс этого метода в быстроте настройки, минус - редактировать порядок выведения свойств нельзя.</p><img src='/bitrix/images/ipol.mailorder/FAQ3.png'><p>Подробнее о макросе #IPOLMO_IMOPAYED# (Документ об оплате): он будет заменен на шаблон вида \"Платежный документ №(номер документа)\" + если задана дата \" от день.месяц.год\".</p><p><strong>Дополнительные события</strong></p><p>Если возникает необходимость добавить иные события, которые будут обрабатываться модулем - необходимо добавить их коды в поля настройки \"Дополнительные события\". Учтите, что если в параметрах события будет отсутствовать ключ ORDER_ID с id обрабатываемого заказа - модуль не будет обрабатывать это событие.</p>";$MESS ['IPOLMO_FAQ_EVENTS_TITLE'] = "События модуля (для программистов)";$MESS ['IPOLMO_FAQ_EVENTS_DESCR'] = "События расширяют обычный функционал модуля, однако для их использования необходимо подключение к работе опытного программиста. События бросаются стандартным образом и ловятся через AddEventHandler. Добавляется код обычно в /bitrix/php_interface/init.php (или /local/php_interface/init.php).<br><div class='ipol_subFaq'>    <a class='ipol_smallHeader' onclick='$(this).next().toggle(); return false;'>&gt; Модификация полей (getAdditionalFields)</a>    <div class='ipol_inst'>       	Событие getAdditionalFields предназначено для внесения изменений в поля письма, с которыми работает модуль. Изменять стандартные поля шаблона нельзя. Подписываемый метод должен вернуть массив, ключи которого схожи с макросами (только без решеток (#) и обязательно начинающиеся с IPOLMO_), используемые в поисьме а значения описывают вводимое поле.				<div style='color:#AC12B1'><pre>AddEventHandler('ipol.mailorder', 'getAdditionalFields', 'myGetAdditionalFields'); <span style='color:#008000'>//подписываемся на событие</span>function myGetAdditionalFields(\$event,\$orderId,\$arFields,\$lid,\$arModuleFields) { <div style='color:#008000'>/*функция, где:	\$event - код почтового события,	\$orderId - id обрабатываемого заказа,	\$arFields - поля почтового события (стандартные данные, отправляемые Битриксом)	\$lid - идентификатор сайта	\$arModuleFields - поля, добавленные модулем (как вы понимаете, могут быть изменены, если в возвращаемом массиве передать данные с аналогичным кодом)*/</div>		\$macros = 'IPOLMO_myField'; <span style='color:#008000'>//Макрос для вставки нового поля в письмо (если используется одномакросовый ввод - поле добавится в блок, вставляемый #IPOLMOALL_PROPS#)</span>	\$name   = 'Новое поле'; <span style='color:#008000'>//Название поля - используется при одномакросовом вводе</span>	\$value  = 'Значение нового поля'; <span style='color:#008000'>//Значение поля</span>		return array(		\$macros => array(			'NAME'  => \$name,			'VALUE' => \$value		)	);}		</pre></div></div><br><div class='ipol_subFaq'>    <a class='ipol_smallHeader' onclick='$(this).next().toggle(); return false;'>&gt; Добавление вкладки опций (onTabsBuild)</a>    <div class='ipol_inst'>		Это сервисное событие позволит добавить на страницу настроек модуля дополнительную вкладку, где можно расположить дополнительную информацию или контроллер обработчиков событий модуля.		<div style='color:#AC12B1'><pre>AddEventHandler('ipol.mailorder', 'getAdditionalFields', 'onTabsBuild'); <span style='color:#008000'>//подписываемся на событие</span>function myGetAdditionalFields(&\$_arTabs) { <div style='color:#008000'>	Функция должна вернуть массив вида название вкладки -> путь к подключаемому файлу относительно корня сайта. Учтите, что если в файле будут новые опции модуля - необходимо обеспечить их сохранение и обработку. </div>	\$_arTabs ['Название вкладки']= 'Путь к файлу, который будет подключен на данной странице';}</div>";$MESS ['IPOLMO_FAQ_LOCATIONDETAILS_TITLE'] = "- Подробнее о настройке";$MESS ['IPOLMO_FAQ_LOCATIONDETAILS_DESCR'] = "По умолчанию свойство заказа типа \"Местоположение\" будет отображаться как Страна, Регион, Город (Россия, Московская обл., Москва). Если необходимо изменить эту цепочку - воспользуйтесь данной настройкой и отметьте необходимые части местоположения. Учтите, что ваша структура местоположений должна соответствовать отмеченным элементам цепочки (если в местоположениях загружены только города - то страну и регион вывести никак не получится).<br>С помощью опции \"Разделитель цепочки\" можно изменять символы, отделяющие элементы цепи друг от друга (пробел так же необходимо указывать).<br>Больший выбор сегментов цепи доступен в Конвертированном Интернет-магазине с Местоположениями 2.0.";// Хинты$MESS ['IPOLMO_HELPER_WORKMODE'] = "<ul><li>Многомакросовый - выбранные свойства вставляются в шаблон макросом вида #IPOLMO_код свойства# (например, #IPOLMO_FIO#)</li><li>Одномакросовый - выбранные свойства вставляются в шаблон макросом #IPOLMOALL_PROPS#</li></ul>";$MESS ['IPOLMO_HELPER_MARKPROPS'] = "Клик на свойстве, чтобы добавить его в вывод, повторный - чтобы убрать.<br>Выбранные свойства отмечаются зеленым.<br>Чтобы выбрать группу, щелкните на ее названии.";$MESS ['IPOLMO_HELPER_LOCATIONDETAILS'] = "Выберите в таблице ту цепочку местоположения, которая должна отображаться в письме, отправляемом клиенту.";// Ошибки$MESS ['IPOLIML_FNDD_ERR_HEADER'] = "Требует вашего внимания";$MESS ['IPOLMO_FNDD_ERR_NOEVENT'] = "Не выбрано ни одного почтового события, с которым работает модуль. Выберите события в настройке \"События, с которыми работает модуль\".";$MESS ['IPOLMO_FNDD_ERR_NOPROPS'] = "Не выбрано ни одного свойства, которое вставляется в письмо клиенту. Выберите события в настройке \"Обрабатываемые свойства заказа\" (клик по свойству, чтобы оно стало зеленым).";$MESS ['IPOL_FNDD_ERR_FOOTER'] = 'Функционал модуля отключен.';// Прочее$MESS ['IPOLMO_LBL_TYPENAME'] = 'Тип местоположения';$MESS ['IPOLMO_LBL_DOSHOW'] = 'Выводить в письме';?>